---
phase: 01-foundation
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified: [src/components/PasswordGate.tsx, src/App.tsx, src/hooks/useAuth.ts]
autonomous: true
---

<objective>
Add password protection and responsive layout for desktop/mobile.

Purpose: Restrict access to a small group and ensure usability across devices.
Output: Password-protected app with responsive UI that works on all screen sizes.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create password gate</name>
  <files>src/components/PasswordGate.tsx, src/hooks/useAuth.ts</files>
  <action>
    Create useAuth hook:
    1. Check localStorage for auth token (simple flag: "formcheck_authed")
    2. Expose: isAuthed, login(password), logout
    3. login() compares password against hardcoded value or env var (VITE_APP_PASSWORD)
    4. On success, set localStorage flag and return true
    5. On failure, return false (no error message in hook, component handles UI)

    Create PasswordGate component:
    1. Full-screen dark overlay
    2. Centered card with "FormCheck" title
    3. Password input field (type="password")
    4. Submit button
    5. Error message on wrong password ("Incorrect password")
    6. On success, component unmounts (parent conditionally renders)

    Styling: Match dark theme, clean minimal design, mobile-friendly touch targets.
  </action>
  <verify>Component renders password form, accepts correct password</verify>
  <done>Password gate blocks access until correct password entered</done>
</task>

<task type="auto">
  <name>Task 2: Make layout responsive</name>
  <files>src/App.tsx, src/components/CameraPreview.tsx</files>
  <action>
    Update App.tsx layout:
    1. Mobile-first design
    2. Camera preview fills most of viewport on mobile (full width, 70-80% height)
    3. On desktop (md: breakpoint), constrain max-width and center
    4. Header stays readable on all sizes
    5. Add padding/margins that work on both

    Update CameraPreview:
    1. Video container adapts to parent size
    2. Camera switch button positioned for thumb reach on mobile (bottom-right)
    3. Touch-friendly button sizes (min 44px tap target)

    Test breakpoints: 375px (mobile), 768px (tablet), 1024px+ (desktop)
  </action>
  <verify>Resize browser window - layout adapts smoothly, no overflow or broken elements</verify>
  <done>UI works on mobile, tablet, and desktop screen sizes</done>
</task>

<task type="auto">
  <name>Task 3: Integrate auth gate into app flow</name>
  <files>src/App.tsx</files>
  <action>
    Update App.tsx:
    1. Use useAuth hook at top level
    2. If not authed, render PasswordGate (full screen)
    3. If authed, render main app (header + camera)
    4. Add logout button in header (small, unobtrusive)

    Add .env.example file documenting VITE_APP_PASSWORD
    Set a default password for development (e.g., "formcheck2024")
  </action>
  <verify>
    1. Fresh load shows password gate
    2. Wrong password shows error, stays on gate
    3. Correct password shows camera app
    4. Refresh page - still authenticated (localStorage)
    5. Logout returns to password gate
  </verify>
  <done>Complete auth flow working, persists across refresh</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Password gate appears on first visit
- [ ] Correct password grants access
- [ ] Auth persists across page refresh
- [ ] Logout works
- [ ] Layout is responsive (test at 375px, 768px, 1200px widths)
- [ ] `npm run build` succeeds
</verification>

<success_criteria>
- All tasks completed
- Password protection works (AUTH-01 satisfied)
- Responsive layout works on mobile and desktop (CAM-03 satisfied)
- No regressions to camera functionality
- Phase 1 complete
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>
