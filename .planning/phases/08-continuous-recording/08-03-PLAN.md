---
phase: 08-continuous-recording
plan: 03
type: execute
wave: 3
depends_on: ["08-02"]
files_modified: [src/components/CameraPreview.tsx]
autonomous: false
---

<objective>
Integrate continuous recording into the UI with human verification.

Purpose: Add continuous recording toggle to CameraPreview with status indicator.
Output: Working continuous recording feature visible in UI.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-continuous-recording/08-01-SUMMARY.md
@.planning/phases/08-continuous-recording/08-02-SUMMARY.md

# Component to modify:
@src/components/CameraPreview.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add continuous recording toggle to CameraPreview</name>
  <files>src/components/CameraPreview.tsx</files>
  <action>
Add continuous recording integration:

1. Import useContinuousRecording hook
2. Initialize hook with stream
3. Add toggle button in controls area (separate from manual record button)
4. Add status indicator showing:
   - Recording state (recording/paused/uploading)
   - Duration
   - Chunk count / upload progress

**UI placement:**
- Add a "Continuous" toggle button near the existing record button
- When enabled, show a small status badge with duration
- Use different color scheme from manual record (e.g., blue vs red)

**Button states:**
- Idle: "Start Continuous" (outline style)
- Recording: "Stop Continuous" (solid blue, pulsing indicator)
- Uploading: "Uploading..." (disabled, spinner)

**Status indicator:**
- Show duration in MM:SS format
- Show "â†‘ X/Y" for upload progress when uploading

Keep existing manual recording functionality untouched - they should coexist.
  </action>
  <verify>npm run build</verify>
  <done>Continuous recording toggle visible in UI, build passes</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Continuous recording with page visibility handling</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:5173
    3. Test continuous recording:
       a. Click "Start Continuous" - should start recording
       b. Verify duration counter increments
       c. Switch to another tab for 5+ seconds
       d. Return to tab - should show upload progress briefly
       e. Check browser console for chunk saves and uploads
    4. Test coexistence:
       a. Start continuous recording
       b. Use manual record button - both should work
    5. Verify no errors in console
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] Continuous recording toggle appears in UI
- [ ] Duration counter works
- [ ] Page visibility triggers upload
- [ ] Manual recording still works alongside
- [ ] Human verified functionality
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Human approved continuous recording functionality
</success_criteria>

<output>
After completion, create `.planning/phases/08-continuous-recording/08-03-SUMMARY.md`
</output>
