---
phase: 13-status-indicator
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ContinuousRecordingStatus.tsx
  - src/components/CameraPreview.tsx
autonomous: true
---

<objective>
Add read-only status indicator for continuous recording state.

Purpose: User can see at a glance whether continuous recording is active, uploading, or inactive without any toggle controls.
Output: Small status indicator in camera preview showing recording state with color coding.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-auto-start-recording/12-01-SUMMARY.md

@src/hooks/useContinuousRecording.ts
@src/components/CameraPreview.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ContinuousRecordingStatus component</name>
  <files>src/components/ContinuousRecordingStatus.tsx</files>
  <action>
Create a small, read-only status indicator component that shows continuous recording state.

Props interface:
```typescript
interface ContinuousRecordingStatusProps {
  state: 'idle' | 'recording' | 'paused' | 'uploading';
  error: string | null;
  uploadProgress?: { uploaded: number; total: number };
}
```

Visual design (follow existing indicator patterns in CameraPreview):
- **recording (green)**: Green dot + "Recording" text, dot pulses
- **uploading (yellow)**: Yellow dot + "Uploading X/Y" text, dot pulses
- **paused (grey)**: Grey dot + "Paused" text
- **idle (grey)**: Grey dot + "Standby" text
- **error (red)**: Red dot + truncated error message (max 20 chars)

Style to match existing indicators (see tracking status at lines 323-335):
- Small pill shape: `px-3 py-1.5 rounded-full text-xs font-medium`
- Background: semi-transparent matching state color (green-500/80, yellow-500/80, gray-800/80, red-500/80)
- Dot: `w-2 h-2 rounded-full` with `animate-pulse` for active states

Keep component small and focused - no complex logic, just visual display.
  </action>
  <verify>tsc --noEmit passes, component exports correctly</verify>
  <done>ContinuousRecordingStatus component created with all state visuals</done>
</task>

<task type="auto">
  <name>Task 2: Add status indicator to CameraPreview</name>
  <files>src/components/CameraPreview.tsx</files>
  <action>
1. Import the new component:
   ```typescript
   import { ContinuousRecordingStatus } from './ContinuousRecordingStatus';
   ```

2. Destructure the state values from useContinuousRecording (currently unused):
   ```typescript
   const {
     state: continuousState,
     error: continuousError,
     uploadProgress,
   } = useContinuousRecording(stream, { autoStart: true });
   ```

3. Add the status indicator in the top-left status area (after the skeleton toggle button, around line 365):
   ```tsx
   {/* Continuous recording status indicator */}
   <ContinuousRecordingStatus
     state={continuousState}
     error={continuousError}
     uploadProgress={uploadProgress}
   />
   ```

Position: Below the existing "Tracking" indicator and skeleton toggle, in the same flex column (the div at line 323).
  </action>
  <verify>npm run build succeeds, app loads and shows status indicator</verify>
  <done>Status indicator visible in camera preview, updates with recording state</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run dev` starts, camera loads
- [ ] Status indicator shows "Recording" (green) when continuous recording active
- [ ] Status shows "Uploading X/Y" (yellow) when chunks uploading
- [ ] Status shows correctly on page visibility change (tab away/back)
- [ ] No console errors
</verification>

<success_criteria>

- Read-only status indicator displays continuous recording state
- Color coding: green=recording, yellow=uploading, grey=idle/paused, red=error
- Indicator positioned in top-left with other status indicators
- No user interaction required (pure display component)
- Build passes with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-status-indicator/13-01-SUMMARY.md`
</output>
